<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="DELETE">
        <applicability/>
        <applicability_mode>query</applicability_mode>
        <auto_resolution_enabled>false</auto_resolution_enabled>
        <category/>
        <channels/>
        <connect_queue/>
        <description>Returns results from knowledge articles, service catalog items, attachments to cases and other sources.</description>
        <flexible_conversation_switching>true</flexible_conversation_switching>
        <graph>{"graph_api_version":"1.0.31","variables":{"6d3f6c4a60d8484cb77732f5b04c254c":{"id":"6d3f6c4a60d8484cb77732f5b04c254c","name":"search_result_json_string","label":"search_result_json_string","varType":"script","category":"vaVars"},"c6b392f4a21540baa43605c583dd654a":{"id":"c6b392f4a21540baa43605c583dd654a","name":"index","label":"index","varType":"script","value":"0","category":"vaVars"},"7bdc68f234d54c99a78fbab40914b8b9":{"id":"7bdc68f234d54c99a78fbab40914b8b9","value":{"mode":"simple","value":"1"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"e6c159023b38411583c8934ad285962a":{"id":"e6c159023b38411583c8934ad285962a","value":{"mode":"simple","value":"2821675a5b30130070e4492c11f91a89"},"name":"search_context_sys_id","label":"search_context_sys_id","varType":"script","category":"vaVars"},"ef74093257f84dc2bc118a8e4fde3809":{"id":"ef74093257f84dc2bc118a8e4fde3809","value":{"mode":"simple","value":"0"},"name":"searchResultCount","label":"searchResultCount","varType":"script","category":"vaVars"},"a20e4a9ef2444eb1b09209d940033694":{"id":"a20e4a9ef2444eb1b09209d940033694","name":"context","label":"Context","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"51a022a7913f42f2bc72c091b63fd203":{"id":"51a022a7913f42f2bc72c091b63fd203","name":"did_articles_help","label":"Did Articles Help","varType":"boolean","category":"vaInputs"},"ef32f9d238d14b2cbe2c3c57917bf107":{"id":"ef32f9d238d14b2cbe2c3c57917bf107","value":{"mode":"simple","value":"false"},"name":"results_returned","label":"results_returned","varType":"script","category":"vaVars"},"8089fd3dccb14721acc8f795391e9e12":{"id":"8089fd3dccb14721acc8f795391e9e12","value":{"mode":"simple","value":"false"},"name":"results_helpful","label":"results_helpful","varType":"script","category":"vaVars"},"d316fda5a74749598a55c8dc63a05599":{"id":"d316fda5a74749598a55c8dc63a05599","name":"query","label":"Query","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"d060530394b141a0b39e41691e837057":{"id":"d060530394b141a0b39e41691e837057","value":{"value":"","mode":"simple"},"name":"DEBUG_JSON_RESULT","label":"DEBUG_JSON_RESULT","varType":"script","category":"vaVars"},"462e41916f8b43e79c049e5936b45bca":{"id":"462e41916f8b43e79c049e5936b45bca","name":"portal","label":"Portal","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"b7999fcdb89e4b2ea1e405e73d473960":{"id":"b7999fcdb89e4b2ea1e405e73d473960","name":"kb_knowledge_base","label":"Kb_knowledge_base","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"5f6558460d254e0882875cbd5ad6fbc0":{"category":"vaInputs","id":"5f6558460d254e0882875cbd5ad6fbc0","label":"User","name":"user","table":"sys_user","varType":"reference"},"afbb39c4e0ef477bab7b15254fb7aa72":{"id":"afbb39c4e0ef477bab7b15254fb7aa72","name":"user_operation","label":"User Operation","varType":"reference","table":"","category":"vaInputs"},"17574e3b8da04353b57fe6782513d63a":{"id":"17574e3b8da04353b57fe6782513d63a","value":{"mode":"simple","value":"3"},"name":"max_search_result_count","label":"max_search_result_count","varType":"script","category":"vaVars"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"Topic block for Contextual Search","nodes":{"8051b1b95dd04c6e89d411958ea03aed":{"id":"8051b1b95dd04c6e89d411958ea03aed","stepType":"Start","name":"Start","greetingResponse":{"value":[{"type":"paragraph","children":[{"text":"Hi , How can I help you ?"}]}],"mode":"simple"},"applicability":{"mode":"query","value":""},"parameters":[{"name":"context","value":"","id":"a20e4a9ef2444eb1b09209d940033694","referenced":true,"disabled":false,"checked":true},{"name":"query","value":"","id":"d316fda5a74749598a55c8dc63a05599","referenced":true,"disabled":false,"checked":true},{"name":"portal","value":"","id":"462e41916f8b43e79c049e5936b45bca","referenced":true,"disabled":false,"checked":false},{"name":"kb_knowledge_base","value":"","id":"b7999fcdb89e4b2ea1e405e73d473960","referenced":true,"disabled":false,"checked":false}],"variableIds":["a20e4a9ef2444eb1b09209d940033694","d316fda5a74749598a55c8dc63a05599","462e41916f8b43e79c049e5936b45bca","b7999fcdb89e4b2ea1e405e73d473960"]},"a7330f5bce984ce285fbd1cb8b4f29fa":{"id":"a7330f5bce984ce285fbd1cb8b4f29fa","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"outputVariables":[{"key":"Results returned","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.results_returned}}","displayValue":"vaVars➛results_returned"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true,"cannotBeDeleted":true,"alertMessage":{"id":"end.outputParamDeleteAlert","defaultMessage":"You cannot delete this parameter because other calling topics use it."},"additionalInfoUrl":"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d9dec393b3973300dbbf6030c6a8dc27%5Ecalling_cs_topic_idIN09c7dd08b3a33300dbbf6030c6a8dc5b","additionalInfoLabel":{"id":"end.outputParameterDeleteInfoLink","defaultMessage":"See calling topics"}},{"key":"Results Helpful","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.results_helpful}}","displayValue":"vaVars➛results_helpful"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true,"cannotBeDeleted":true,"alertMessage":{"id":"end.outputParamDeleteAlert","defaultMessage":"You cannot delete this parameter because other calling topics use it."},"additionalInfoUrl":"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d9dec393b3973300dbbf6030c6a8dc27%5Ecalling_cs_topic_idIN09c7dd08b3a33300dbbf6030c6a8dc5b","additionalInfoLabel":{"id":"end.outputParameterDeleteInfoLink","defaultMessage":"See calling topics"}}]},"5686597dd01a4cdc9318adf9be8ecbbd":{"id":"5686597dd01a4cdc9318adf9be8ecbbd","name":"Contextual Search","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaInputs.context.getDisplayValue(), vaInputs.query, vaInputs.kb_knowledge_base\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }   \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, vaVars.max_search_result_count, -2);\n    vaVars.searchResultCount = relevantSearchResults.length;\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\n    vaVars.index = 0;\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"},"isOk":true},"199646985fc24a13a878bf61b3870467":{"id":"199646985fc24a13a878bf61b3870467","stepType":"Decision","name":"Did the search return results?","applicability":{"mode":"query","value":""}},"479db337b79741a1ae7cef2c8866e8c1":{"id":"479db337b79741a1ae7cef2c8866e8c1","stepType":"Prompt","name":"Did Articles Help","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Did any of this information resolve your issue?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"51a022a7913f42f2bc72c091b63fd203","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"2834e3b7c9204e31b8ad53ea5851c530":{"id":"2834e3b7c9204e31b8ad53ea5851c530","name":"Record Outputs","script":"(function execute() {\n    if(vaInputs.did_articles_help == 'true') {\n        vaVars.results_helpful = true;\n    } else {\n        vaVars.results_helpful = false;\n    }\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"9213923d88a64f65b42b823614be1cba":{"id":"9213923d88a64f65b42b823614be1cba","stepType":"LinkOutput","name":"Display multi-link","url":{"mode":"simple","value":""},"label":{"mode":"simple","value":""},"header":{"mode":"simple","value":""},"applicability":{"value":"","mode":"query"},"linkType":"multiple","introMsg":{"value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit)\n    var start = index + 1;\n    var end = (index + limit &lt; vaVars.searchResultCount) ? index + limit : vaVars.searchResultCount;\n    return gs.getMessage(\"Showing results {0} to {1} of {2}\", [start.toString(), end.toString(), vaVars.searchResultCount.toString()]);\n})()\n","mode":"script"},"listOfLinks":"(function execute(header) {\n\tvar variables = {\n\t\tlimit: vaVars.limit,\n\t\tindex: vaVars.index,\n\t\tsearch_result_json_string: vaVars.search_result_json_string,\n\t\tportal: vaInputs.portal\n\t}\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n"},"f285050d349249d8933db7fa194d655a":{"stepType":"ReferenceChoicePrompt","name":"User Operation","prompt":{"value":[{"type":"paragraph","children":[{"text":"What would you like to do?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"afbb39c4e0ef477bab7b15254fb7aa72","id":"f285050d349249d8933db7fa194d655a","mode":"external","script":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()","metadataScript":"","noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"No Records Found"}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false},"36f54484f13149ce9e0fbd1984f9237b":{"id":"36f54484f13149ce9e0fbd1984f9237b","stepType":"Decision","name":"Decision"},"d46fd4ffe6254276bc40219963c702ac":{"id":"d46fd4ffe6254276bc40219963c702ac","name":"Show More","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) + parseInt(vaVars.limit);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"3026923750ff4ab0b975a354d0f7ac86":{"id":"3026923750ff4ab0b975a354d0f7ac86","name":"Show Previous","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) - parseInt(vaVars.limit);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"bc516c8855ea40fa90a3f451fed9a95b":{"id":"bc516c8855ea40fa90a3f451fed9a95b","stepType":"Decision","name":"Decision"}},"edges":[{"id":"0c1bbb1fd5f9406c80db2590b99dadf1","edgeType":"Edge","source":"8051b1b95dd04c6e89d411958ea03aed","target":"5686597dd01a4cdc9318adf9be8ecbbd","sourcePort":"","targetPort":""},{"id":"e728d62f844f47b8a1118058e4d9e236","edgeType":"Branch","source":"199646985fc24a13a878bf61b3870467","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.searchResultCount &gt; 0) {\n        vaVars.results_returned = true;\n        return true;\n    }\n    return false;\n})()\n"},"label":"Yes"},{"id":"f0d9c268d82f4aa5b193bb57bf450248","edgeType":"Branch","source":"199646985fc24a13a878bf61b3870467","target":"a7330f5bce984ce285fbd1cb8b4f29fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (!(vaVars.searchResultCount &gt; 0)) {\n        vaVars.results_helpful = false;\n        vaVars.results_returned = false;\n        return true;\n    }\n    return false;\n\n})()\n"},"label":"No"},{"id":"3b1ce1d55df54577a8d02beb3e446206","edgeType":"Edge","source":"5686597dd01a4cdc9318adf9be8ecbbd","target":"199646985fc24a13a878bf61b3870467","sourcePort":"","targetPort":""},{"id":"71fed98a8f4b40b9af83b826d7fa1775","edgeType":"Edge","source":"479db337b79741a1ae7cef2c8866e8c1","target":"2834e3b7c9204e31b8ad53ea5851c530","sourcePort":"","targetPort":""},{"id":"d35071d5cbc74c3ba95e7289fc3b24cb","edgeType":"Edge","source":"2834e3b7c9204e31b8ad53ea5851c530","target":"a7330f5bce984ce285fbd1cb8b4f29fa","sourcePort":"","targetPort":""},{"id":"ec3dff998a3b4c6a84f06b22758bd501","edgeType":"Edge","source":"f285050d349249d8933db7fa194d655a","target":"36f54484f13149ce9e0fbd1984f9237b","sourcePort":"","targetPort":""},{"id":"edf429851feb4c5fadabcdaa744c87d1","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"479db337b79741a1ae7cef2c8866e8c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'done';\n})()\n"},"label":"I'm Done"},{"id":"2d8f75d5a63e4db689a1325c86beddf3","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"d46fd4ffe6254276bc40219963c702ac","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_more';\n})()\n"},"label":"Show More"},{"id":"e2868c51d2934266ac73f01e65226b01","edgeType":"Edge","source":"d46fd4ffe6254276bc40219963c702ac","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":""},{"id":"df79760c274a4fd487eadf03a946e023","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"3026923750ff4ab0b975a354d0f7ac86","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_prev';\n})()\n"},"label":"Show Previous"},{"id":"f48c6b54c3404e9bb69df79b3dea5ee2","edgeType":"Edge","source":"3026923750ff4ab0b975a354d0f7ac86","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":""},{"id":"9a2340b4d2754ebd8ed429f275809583","edgeType":"Edge","source":"9213923d88a64f65b42b823614be1cba","target":"bc516c8855ea40fa90a3f451fed9a95b","sourcePort":"","targetPort":""},{"id":"af3c50a1e14245088e9a2c4ef1d470d6","edgeType":"Branch","source":"bc516c8855ea40fa90a3f451fed9a95b","target":"f285050d349249d8933db7fa194d655a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &gt; limit;\n})()\n"},"label":"count &gt; limit"},{"id":"f0aa9414f378455d91e57277a4277ac1","edgeType":"Branch","source":"bc516c8855ea40fa90a3f451fed9a95b","target":"479db337b79741a1ae7cef2c8866e8c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &lt;= limit;\n})()\n"},"label":"count &lt;= limit"}]}}}</graph>
        <key_phrases/>
        <library>true</library>
        <live_agent>false</live_agent>
        <name>covbot</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <roles/>
        <source_topic_id>86c83f122fa4701061ad811df699b678</source_topic_id>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-06-07 15:03:19</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>630808ee2fa4701061ad811df699b6f2</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>covbot</sys_name>
        <sys_package display_value="Covid-19 Infections and Vaccination Tracker" source="x_563969_covid_19">461189642f20301061ad811df699b61c</sys_package>
        <sys_policy/>
        <sys_scope display_value="Covid-19 Infections and Vaccination Tracker">461189642f20301061ad811df699b61c</sys_scope>
        <sys_update_name>sys_cb_topic_630808ee2fa4701061ad811df699b6f2</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-06-07 15:03:19</sys_updated_on>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>TOPIC_BLOCK</type>
        <variables/>
    </sys_cb_topic>
    <sys_variable_value action="DELETE" query="document_key=630808ee2fa4701061ad811df699b6f2"/>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Covid-19 Infections and Vaccination Tracker">461189642f20301061ad811df699b61c</application>
        <file_path/>
        <instance_id>9fe459e7db4f7bc40ae3ac44d49619e6</instance_id>
        <instance_name>dev91329</instance_name>
        <name>sys_cb_topic_630808ee2fa4701061ad811df699b6f2</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic"><sys_cb_topic action="INSERT_OR_UPDATE"><applicability/><applicability_mode>query</applicability_mode><auto_resolution_enabled>false</auto_resolution_enabled><category/><channels/><connect_queue/><description>Returns results from knowledge articles, service catalog items, attachments to cases and other sources.</description><flexible_conversation_switching>true</flexible_conversation_switching><graph>{"graph_api_version":"1.0.31","variables":{"6d3f6c4a60d8484cb77732f5b04c254c":{"id":"6d3f6c4a60d8484cb77732f5b04c254c","name":"search_result_json_string","label":"search_result_json_string","varType":"script","category":"vaVars"},"c6b392f4a21540baa43605c583dd654a":{"id":"c6b392f4a21540baa43605c583dd654a","name":"index","label":"index","varType":"script","value":"0","category":"vaVars"},"7bdc68f234d54c99a78fbab40914b8b9":{"id":"7bdc68f234d54c99a78fbab40914b8b9","value":{"mode":"simple","value":"1"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"e6c159023b38411583c8934ad285962a":{"id":"e6c159023b38411583c8934ad285962a","value":{"mode":"simple","value":"2821675a5b30130070e4492c11f91a89"},"name":"search_context_sys_id","label":"search_context_sys_id","varType":"script","category":"vaVars"},"ef74093257f84dc2bc118a8e4fde3809":{"id":"ef74093257f84dc2bc118a8e4fde3809","value":{"mode":"simple","value":"0"},"name":"searchResultCount","label":"searchResultCount","varType":"script","category":"vaVars"},"a20e4a9ef2444eb1b09209d940033694":{"id":"a20e4a9ef2444eb1b09209d940033694","name":"context","label":"Context","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"51a022a7913f42f2bc72c091b63fd203":{"id":"51a022a7913f42f2bc72c091b63fd203","name":"did_articles_help","label":"Did Articles Help","varType":"boolean","category":"vaInputs"},"ef32f9d238d14b2cbe2c3c57917bf107":{"id":"ef32f9d238d14b2cbe2c3c57917bf107","value":{"mode":"simple","value":"false"},"name":"results_returned","label":"results_returned","varType":"script","category":"vaVars"},"8089fd3dccb14721acc8f795391e9e12":{"id":"8089fd3dccb14721acc8f795391e9e12","value":{"mode":"simple","value":"false"},"name":"results_helpful","label":"results_helpful","varType":"script","category":"vaVars"},"d316fda5a74749598a55c8dc63a05599":{"id":"d316fda5a74749598a55c8dc63a05599","name":"query","label":"Query","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"d060530394b141a0b39e41691e837057":{"id":"d060530394b141a0b39e41691e837057","value":{"value":"","mode":"simple"},"name":"DEBUG_JSON_RESULT","label":"DEBUG_JSON_RESULT","varType":"script","category":"vaVars"},"462e41916f8b43e79c049e5936b45bca":{"id":"462e41916f8b43e79c049e5936b45bca","name":"portal","label":"Portal","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"b7999fcdb89e4b2ea1e405e73d473960":{"id":"b7999fcdb89e4b2ea1e405e73d473960","name":"kb_knowledge_base","label":"Kb_knowledge_base","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"5f6558460d254e0882875cbd5ad6fbc0":{"category":"vaInputs","id":"5f6558460d254e0882875cbd5ad6fbc0","label":"User","name":"user","table":"sys_user","varType":"reference"},"afbb39c4e0ef477bab7b15254fb7aa72":{"id":"afbb39c4e0ef477bab7b15254fb7aa72","name":"user_operation","label":"User Operation","varType":"reference","table":"","category":"vaInputs"},"17574e3b8da04353b57fe6782513d63a":{"id":"17574e3b8da04353b57fe6782513d63a","value":{"mode":"simple","value":"3"},"name":"max_search_result_count","label":"max_search_result_count","varType":"script","category":"vaVars"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"Topic block for Contextual Search","nodes":{"8051b1b95dd04c6e89d411958ea03aed":{"id":"8051b1b95dd04c6e89d411958ea03aed","stepType":"Start","name":"Start","greetingResponse":{"value":[{"type":"paragraph","children":[{"text":"Hi , How can I help you ?"}]}],"mode":"simple"},"applicability":{"mode":"query","value":""},"parameters":[{"name":"context","value":"","id":"a20e4a9ef2444eb1b09209d940033694","referenced":true,"disabled":false,"checked":true},{"name":"query","value":"","id":"d316fda5a74749598a55c8dc63a05599","referenced":true,"disabled":false,"checked":true},{"name":"portal","value":"","id":"462e41916f8b43e79c049e5936b45bca","referenced":true,"disabled":false,"checked":false},{"name":"kb_knowledge_base","value":"","id":"b7999fcdb89e4b2ea1e405e73d473960","referenced":true,"disabled":false,"checked":false}],"variableIds":["a20e4a9ef2444eb1b09209d940033694","d316fda5a74749598a55c8dc63a05599","462e41916f8b43e79c049e5936b45bca","b7999fcdb89e4b2ea1e405e73d473960"]},"a7330f5bce984ce285fbd1cb8b4f29fa":{"id":"a7330f5bce984ce285fbd1cb8b4f29fa","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"outputVariables":[{"key":"Results returned","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.results_returned}}","displayValue":"vaVars➛results_returned"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true,"cannotBeDeleted":true,"alertMessage":{"id":"end.outputParamDeleteAlert","defaultMessage":"You cannot delete this parameter because other calling topics use it."},"additionalInfoUrl":"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d9dec393b3973300dbbf6030c6a8dc27%5Ecalling_cs_topic_idIN09c7dd08b3a33300dbbf6030c6a8dc5b","additionalInfoLabel":{"id":"end.outputParameterDeleteInfoLink","defaultMessage":"See calling topics"}},{"key":"Results Helpful","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.results_helpful}}","displayValue":"vaVars➛results_helpful"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true,"cannotBeDeleted":true,"alertMessage":{"id":"end.outputParamDeleteAlert","defaultMessage":"You cannot delete this parameter because other calling topics use it."},"additionalInfoUrl":"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d9dec393b3973300dbbf6030c6a8dc27%5Ecalling_cs_topic_idIN09c7dd08b3a33300dbbf6030c6a8dc5b","additionalInfoLabel":{"id":"end.outputParameterDeleteInfoLink","defaultMessage":"See calling topics"}}]},"5686597dd01a4cdc9318adf9be8ecbbd":{"id":"5686597dd01a4cdc9318adf9be8ecbbd","name":"Contextual Search","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaInputs.context.getDisplayValue(), vaInputs.query, vaInputs.kb_knowledge_base\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }   \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, vaVars.max_search_result_count, -2);\n    vaVars.searchResultCount = relevantSearchResults.length;\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\n    vaVars.index = 0;\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"},"isOk":true},"199646985fc24a13a878bf61b3870467":{"id":"199646985fc24a13a878bf61b3870467","stepType":"Decision","name":"Did the search return results?","applicability":{"mode":"query","value":""}},"479db337b79741a1ae7cef2c8866e8c1":{"id":"479db337b79741a1ae7cef2c8866e8c1","stepType":"Prompt","name":"Did Articles Help","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Did any of this information resolve your issue?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"51a022a7913f42f2bc72c091b63fd203","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"2834e3b7c9204e31b8ad53ea5851c530":{"id":"2834e3b7c9204e31b8ad53ea5851c530","name":"Record Outputs","script":"(function execute() {\n    if(vaInputs.did_articles_help == 'true') {\n        vaVars.results_helpful = true;\n    } else {\n        vaVars.results_helpful = false;\n    }\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"9213923d88a64f65b42b823614be1cba":{"id":"9213923d88a64f65b42b823614be1cba","stepType":"LinkOutput","name":"Display multi-link","url":{"mode":"simple","value":""},"label":{"mode":"simple","value":""},"header":{"mode":"simple","value":""},"applicability":{"value":"","mode":"query"},"linkType":"multiple","introMsg":{"value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit)\n    var start = index + 1;\n    var end = (index + limit &lt; vaVars.searchResultCount) ? index + limit : vaVars.searchResultCount;\n    return gs.getMessage(\"Showing results {0} to {1} of {2}\", [start.toString(), end.toString(), vaVars.searchResultCount.toString()]);\n})()\n","mode":"script"},"listOfLinks":"(function execute(header) {\n\tvar variables = {\n\t\tlimit: vaVars.limit,\n\t\tindex: vaVars.index,\n\t\tsearch_result_json_string: vaVars.search_result_json_string,\n\t\tportal: vaInputs.portal\n\t}\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n"},"f285050d349249d8933db7fa194d655a":{"stepType":"ReferenceChoicePrompt","name":"User Operation","prompt":{"value":[{"type":"paragraph","children":[{"text":"What would you like to do?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"afbb39c4e0ef477bab7b15254fb7aa72","id":"f285050d349249d8933db7fa194d655a","mode":"external","script":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()","metadataScript":"","noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"No Records Found"}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false},"36f54484f13149ce9e0fbd1984f9237b":{"id":"36f54484f13149ce9e0fbd1984f9237b","stepType":"Decision","name":"Decision"},"d46fd4ffe6254276bc40219963c702ac":{"id":"d46fd4ffe6254276bc40219963c702ac","name":"Show More","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) + parseInt(vaVars.limit);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"3026923750ff4ab0b975a354d0f7ac86":{"id":"3026923750ff4ab0b975a354d0f7ac86","name":"Show Previous","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) - parseInt(vaVars.limit);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"bc516c8855ea40fa90a3f451fed9a95b":{"id":"bc516c8855ea40fa90a3f451fed9a95b","stepType":"Decision","name":"Decision"}},"edges":[{"id":"0c1bbb1fd5f9406c80db2590b99dadf1","edgeType":"Edge","source":"8051b1b95dd04c6e89d411958ea03aed","target":"5686597dd01a4cdc9318adf9be8ecbbd","sourcePort":"","targetPort":""},{"id":"e728d62f844f47b8a1118058e4d9e236","edgeType":"Branch","source":"199646985fc24a13a878bf61b3870467","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.searchResultCount &gt; 0) {\n        vaVars.results_returned = true;\n        return true;\n    }\n    return false;\n})()\n"},"label":"Yes"},{"id":"f0d9c268d82f4aa5b193bb57bf450248","edgeType":"Branch","source":"199646985fc24a13a878bf61b3870467","target":"a7330f5bce984ce285fbd1cb8b4f29fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (!(vaVars.searchResultCount &gt; 0)) {\n        vaVars.results_helpful = false;\n        vaVars.results_returned = false;\n        return true;\n    }\n    return false;\n\n})()\n"},"label":"No"},{"id":"3b1ce1d55df54577a8d02beb3e446206","edgeType":"Edge","source":"5686597dd01a4cdc9318adf9be8ecbbd","target":"199646985fc24a13a878bf61b3870467","sourcePort":"","targetPort":""},{"id":"71fed98a8f4b40b9af83b826d7fa1775","edgeType":"Edge","source":"479db337b79741a1ae7cef2c8866e8c1","target":"2834e3b7c9204e31b8ad53ea5851c530","sourcePort":"","targetPort":""},{"id":"d35071d5cbc74c3ba95e7289fc3b24cb","edgeType":"Edge","source":"2834e3b7c9204e31b8ad53ea5851c530","target":"a7330f5bce984ce285fbd1cb8b4f29fa","sourcePort":"","targetPort":""},{"id":"ec3dff998a3b4c6a84f06b22758bd501","edgeType":"Edge","source":"f285050d349249d8933db7fa194d655a","target":"36f54484f13149ce9e0fbd1984f9237b","sourcePort":"","targetPort":""},{"id":"edf429851feb4c5fadabcdaa744c87d1","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"479db337b79741a1ae7cef2c8866e8c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'done';\n})()\n"},"label":"I'm Done"},{"id":"2d8f75d5a63e4db689a1325c86beddf3","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"d46fd4ffe6254276bc40219963c702ac","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_more';\n})()\n"},"label":"Show More"},{"id":"e2868c51d2934266ac73f01e65226b01","edgeType":"Edge","source":"d46fd4ffe6254276bc40219963c702ac","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":""},{"id":"df79760c274a4fd487eadf03a946e023","edgeType":"Branch","source":"36f54484f13149ce9e0fbd1984f9237b","target":"3026923750ff4ab0b975a354d0f7ac86","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_prev';\n})()\n"},"label":"Show Previous"},{"id":"f48c6b54c3404e9bb69df79b3dea5ee2","edgeType":"Edge","source":"3026923750ff4ab0b975a354d0f7ac86","target":"9213923d88a64f65b42b823614be1cba","sourcePort":"","targetPort":""},{"id":"9a2340b4d2754ebd8ed429f275809583","edgeType":"Edge","source":"9213923d88a64f65b42b823614be1cba","target":"bc516c8855ea40fa90a3f451fed9a95b","sourcePort":"","targetPort":""},{"id":"af3c50a1e14245088e9a2c4ef1d470d6","edgeType":"Branch","source":"bc516c8855ea40fa90a3f451fed9a95b","target":"f285050d349249d8933db7fa194d655a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &gt; limit;\n})()\n"},"label":"count &gt; limit"},{"id":"f0aa9414f378455d91e57277a4277ac1","edgeType":"Branch","source":"bc516c8855ea40fa90a3f451fed9a95b","target":"479db337b79741a1ae7cef2c8866e8c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &lt;= limit;\n})()\n"},"label":"count &lt;= limit"}]}}}</graph><key_phrases/><library>true</library><live_agent>false</live_agent><name>covbot</name><nlu_intent/><nlu_intent_label/><nlu_model/><nlu_model_label/><nlu_provider/><roles/><source_topic_id>86c83f122fa4701061ad811df699b678</source_topic_id><sys_class_name>sys_cb_topic</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2021-06-07 15:03:19</sys_created_on><sys_domain>global</sys_domain><sys_id>630808ee2fa4701061ad811df699b6f2</sys_id><sys_mod_count>0</sys_mod_count><sys_name>covbot</sys_name><sys_package display_value="Covid-19 Infections and Vaccination Tracker" source="x_563969_covid_19">461189642f20301061ad811df699b61c</sys_package><sys_policy/><sys_scope display_value="Covid-19 Infections and Vaccination Tracker">461189642f20301061ad811df699b61c</sys_scope><sys_update_name>sys_cb_topic_630808ee2fa4701061ad811df699b6f2</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2021-06-07 15:03:19</sys_updated_on><triggerable_by_notification>false</triggerable_by_notification><type>TOPIC_BLOCK</type><variables/></sys_cb_topic><sys_variable_value action="delete_multiple" query="document_key=630808ee2fa4701061ad811df699b6f2"/></record_update>]]></payload>
        <payload_hash>1064575935</payload_hash>
        <record_name>covbot</record_name>
        <reverted_from/>
        <source>9554d5a02f60301061ad811df699b6f4</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-06-07 15:03:20</sys_created_on>
        <sys_id>b30848ee2fa4701061ad811df699b60d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>179e6ffe4880000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-06-07 15:03:20</sys_updated_on>
        <type>Topic</type>
        <update_guid>fb0848eeb2a4701089360a5f12d4fa0c</update_guid>
        <update_guid_history>fb0848eeb2a4701089360a5f12d4fa0c:1064575935</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-06-07 15:03:35</sys_created_on>
        <sys_db_object display_value="" name="sys_cb_topic">sys_cb_topic</sys_db_object>
        <sys_id>d7dd8eba9cbf463ab8ddfeb0100dd224</sys_id>
        <sys_metadata>630808ee2fa4701061ad811df699b6f2</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>covbot</sys_name>
        <sys_package display_value="Covid-19 Infections and Vaccination Tracker" source="x_563969_covid_19">461189642f20301061ad811df699b61c</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="Covid-19 Infections and Vaccination Tracker">461189642f20301061ad811df699b61c</sys_scope>
        <sys_scope_delete display_value="">48faad04c57d4bb9995aadcb05bbb521</sys_scope_delete>
        <sys_update_name>sys_cb_topic_630808ee2fa4701061ad811df699b6f2</sys_update_name>
        <sys_update_version display_value="sys_cb_topic_630808ee2fa4701061ad811df699b6f2">b30848ee2fa4701061ad811df699b60d</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-06-07 15:03:35</sys_updated_on>
    </sys_metadata_delete>
</record_update>
