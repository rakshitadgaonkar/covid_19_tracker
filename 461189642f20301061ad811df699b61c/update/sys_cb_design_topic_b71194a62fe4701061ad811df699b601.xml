<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Covid-19 Bot">bb1154a62fe4701061ad811df699b6fd</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"c944205fff0545b68bcc7c378798dc35","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"c944205fff0545b68bcc7c378798dc35"}],"goals":[{"name":"primary","trigger_id":"c944205fff0545b68bcc7c378798dc35","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Hi ,we are happy to help you with covid-19 information.\", vaContext.getRequesterLang())"},"id":"702a2771e02a4afd9549752471595c95","name":"Start","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"9b494cb08cea4028a97feb14186b366b","name":"End","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaInputs.context.getDisplayValue(), vaInputs.query, vaInputs.kb_knowledge_base\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }   \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, vaVars.max_search_result_count, -2);\n    vaVars.searchResultCount = relevantSearchResults.length;\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\n    vaVars.index = 0;\n    return;\n})()\n","id":"d86a60ef778843cd8a904e553bf79c01","name":"Contextual Search","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Did the search return results?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if(vaVars.searchResultCount &gt; 0) {\n        vaVars.results_returned = true;\n        return true;\n    }\n    return false;\n})()\n"},"id":"35b33d5ad4f84f0d82d931b482538f79","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (!(vaVars.searchResultCount &gt; 0)) {\n        vaVars.results_helpful = false;\n        vaVars.results_returned = false;\n        return true;\n    }\n    return false;\n\n})()\n"},"id":"e0d8d85d6de74df9a178fc3d3c2460d5","name":"No"}],"id":"16efd331f5fd423ebb779906c51b307f","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"cd9e9c20cc97419db5244296fa34d449","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Did any of this information resolve your issue?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"e12e647f7bb643bea99ef1c9d8182b58","name":"Did Articles Help","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.did_articles_help == 'true') {\n        vaVars.results_helpful = true;\n    } else {\n        vaVars.results_helpful = false;\n    }\n})()\n","id":"d0ebd4265f804d8cb368c283d919287a","name":"Record Outputs","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"LinkOutputPrompt","header":{"type":"String","mode":"script","value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit)\n    var start = index + 1;\n    var end = (index + limit &lt; vaVars.searchResultCount) ? index + limit : vaVars.searchResultCount;\n    return gs.getMessage(\"Showing results {0} to {1} of {2}\", [start.toString(), end.toString(), vaVars.searchResultCount.toString()]);\n})()\n"},"label":{"type":"String","mode":"string","value":""},"url":{"type":"String","mode":"string","value":""},"link_type":"multiple","multi_link_script":"(function execute(header) {\n\tvar variables = {\n\t\tlimit: vaVars.limit,\n\t\tindex: vaVars.index,\n\t\tsearch_result_json_string: vaVars.search_result_json_string,\n\t\tportal: vaInputs.portal\n\t}\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n","id":"fc8a0cf4d2ed44f6bdb843e469b8a00d","name":"Display multi-link","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"bdfa14efa8794ec097f9115e8c50e533","name":"User Operation","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"c8e4bfeab10b4e14a560e7b566ebb0fe","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like to do?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"No Records Found\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var count = parseInt(vaVars.searchResultCount);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if (index + limit &lt; count) {\n        options.push({ \"value\": \"show_more\", \"label\": gs.getMessage(\"Show more\") })\n    }\n    if (index &gt; 0) {\n        options.push({ \"value\": \"show_prev\", \"label\": gs.getMessage(\"Show previous\") })\n    }\n    options.push({ \"value\": \"done\", \"label\": gs.getMessage(\"I'm done\") })\n    return options;\n})()"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"I'm Done","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'done';\n})()\n"},"id":"8425170e5bc04ceeae36e3e49fd83284","name":"I'm Done"},{"type":"Branch","label":"Show More","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_more';\n})()\n"},"id":"4e7c84d2091d4d5b9c6e34b39469627a","name":"Show More"},{"type":"Branch","label":"Show Previous","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.user_operation.getValue() == 'show_prev';\n})()\n"},"id":"2651f67e363d4726a135dd7a17f80354","name":"Show Previous"}],"id":"49cc3d6863ba4914a8068127eac84e5b","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) + parseInt(vaVars.limit);\n})()\n","id":"c785057fb00542e18091c455aad66008","name":"Show More","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.index = parseInt(vaVars.index) - parseInt(vaVars.limit);\n})()\n","id":"43197f274c634914afae5b919beb27b8","name":"Show Previous","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"count &gt; limit","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &gt; limit;\n})()\n"},"id":"6779df8fffc04652abc2342a1f7461db","name":"count &gt; limit"},{"type":"Branch","label":"count &lt;= limit","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    var count = parseInt(vaVars.searchResultCount);\n    var limit = parseInt(vaVars.limit);\n    return count &lt;= limit;\n})()\n"},"id":"d6897449c6cb4a7f86131e3ba483d016","name":"count &lt;= limit"}],"id":"1743607fca124e73b6d60b9a45468584","goal_id":"primary"},{"type":"InputPrompt","variable_id":"8ac3a718b8f54eb0918a7a50933dbbf0","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Type any key to move forward.\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"52a7fe3eaee24028baad14b073167512","name":"user_input2","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""}],"edges":[{"type":"Edge","source_node_id":"52a7fe3eaee24028baad14b073167512","target_node_id":"d86a60ef778843cd8a904e553bf79c01","id":"7f6ed292db9b498cb3f9b152ac8976f2"},{"type":"Edge","source_node_id":"16efd331f5fd423ebb779906c51b307f","target_node_id":"fc8a0cf4d2ed44f6bdb843e469b8a00d","branch_id":"35b33d5ad4f84f0d82d931b482538f79","id":"777dce3d21634d03a1ede4e7d976b558","name":"35b33d5ad4f84f0d82d931b482538f79"},{"type":"Edge","source_node_id":"16efd331f5fd423ebb779906c51b307f","target_node_id":"9b494cb08cea4028a97feb14186b366b","branch_id":"e0d8d85d6de74df9a178fc3d3c2460d5","id":"013b5dd130ee454baf3981f41af7e647","name":"e0d8d85d6de74df9a178fc3d3c2460d5"},{"type":"Edge","source_node_id":"d86a60ef778843cd8a904e553bf79c01","target_node_id":"16efd331f5fd423ebb779906c51b307f","id":"a199bd279d4444419e939bf422cd2b9a"},{"type":"Edge","source_node_id":"e12e647f7bb643bea99ef1c9d8182b58","target_node_id":"d0ebd4265f804d8cb368c283d919287a","id":"59dfa79fc3994011ab4a1a9d087813ed"},{"type":"Edge","source_node_id":"d0ebd4265f804d8cb368c283d919287a","target_node_id":"9b494cb08cea4028a97feb14186b366b","id":"34a4651586a24e4c876e454fb35c1e3b"},{"type":"Edge","source_node_id":"bdfa14efa8794ec097f9115e8c50e533","target_node_id":"49cc3d6863ba4914a8068127eac84e5b","id":"3bc2abc1ad7642239fb9bf59331a7478"},{"type":"Edge","source_node_id":"49cc3d6863ba4914a8068127eac84e5b","target_node_id":"e12e647f7bb643bea99ef1c9d8182b58","branch_id":"8425170e5bc04ceeae36e3e49fd83284","id":"40b5ea1e1bab43c393871f3f6a65d25f","name":"8425170e5bc04ceeae36e3e49fd83284"},{"type":"Edge","source_node_id":"49cc3d6863ba4914a8068127eac84e5b","target_node_id":"c785057fb00542e18091c455aad66008","branch_id":"4e7c84d2091d4d5b9c6e34b39469627a","id":"6c64b7441ca14a47a32697eaa5b40302","name":"4e7c84d2091d4d5b9c6e34b39469627a"},{"type":"Edge","source_node_id":"c785057fb00542e18091c455aad66008","target_node_id":"fc8a0cf4d2ed44f6bdb843e469b8a00d","id":"4ad5f062875944e28623f4f7fa22b43a"},{"type":"Edge","source_node_id":"49cc3d6863ba4914a8068127eac84e5b","target_node_id":"43197f274c634914afae5b919beb27b8","branch_id":"2651f67e363d4726a135dd7a17f80354","id":"70a08757d5a346f98032fb9472b2d20f","name":"2651f67e363d4726a135dd7a17f80354"},{"type":"Edge","source_node_id":"43197f274c634914afae5b919beb27b8","target_node_id":"fc8a0cf4d2ed44f6bdb843e469b8a00d","id":"c3b9881cc1fb41c6b6e7b2a7d971b9cc"},{"type":"Edge","source_node_id":"fc8a0cf4d2ed44f6bdb843e469b8a00d","target_node_id":"1743607fca124e73b6d60b9a45468584","id":"f94d8b6fd6b34b1fb94f1c6326f26dc9"},{"type":"Edge","source_node_id":"1743607fca124e73b6d60b9a45468584","target_node_id":"bdfa14efa8794ec097f9115e8c50e533","branch_id":"6779df8fffc04652abc2342a1f7461db","id":"88b0f91299e9465f8fe2cf21cb751f24","name":"6779df8fffc04652abc2342a1f7461db"},{"type":"Edge","source_node_id":"1743607fca124e73b6d60b9a45468584","target_node_id":"e12e647f7bb643bea99ef1c9d8182b58","branch_id":"d6897449c6cb4a7f86131e3ba483d016","id":"762b002460444ca59865f08fad96f440","name":"d6897449c6cb4a7f86131e3ba483d016"},{"type":"Edge","source_node_id":"702a2771e02a4afd9549752471595c95","target_node_id":"52a7fe3eaee24028baad14b073167512","id":"b573c4eeb0bd4e628baa29b549d038ff"}],"id":"primary"}],"script_variables":[{"type":"String","name":"search_result_json_string","id":"5e6f548e1fc541538f61f890e768a040","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"index","value":{"type":"String","mode":"script"},"id":"f634d129bbec4e1b8ed275621afac8d7","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"limit","value":{"type":"String","mode":"string","value":"1"},"id":"9573b319664240d8909adff7e0be169f","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_context_sys_id","value":{"type":"String","mode":"string","value":"2821675a5b30130070e4492c11f91a89"},"id":"e6bcd4217df24a638b76d7486e6ecbb2","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"searchResultCount","value":{"type":"String","mode":"string","value":"0"},"id":"e1e9ab290bf64bdea03cf892abf31d42","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"results_returned","value":{"type":"String","mode":"string","value":"false"},"id":"d2b0ff6e85c24c2ea0da999b7d6f48d8","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"results_helpful","value":{"type":"String","mode":"string","value":"false"},"id":"fd167b4181314484a5c5eaeb6f516e6b","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"DEBUG_JSON_RESULT","value":{"type":"String","mode":"string"},"id":"ba19a8f97d204b188c43850bf2ecfc0d","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"max_search_result_count","value":{"type":"String","mode":"string","value":"3"},"id":"5315b1883cba4faea9666c2005fbabbd","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"String","name":"context","id":"a377e53b410c4f3082354c2278c11b25","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"True/False","id":"cd9e9c20cc97419db5244296fa34d449","name":"did_articles_help","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"query","id":"d593f67867b744b0b2efcd882c39cc29","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"String","name":"portal","id":"b577775859f44eb9afeb9c31838d13f9","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"String","name":"kb_knowledge_base","id":"7504d4d4f171446e83ced2fbd32fa97a","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"Reference","table":"sys_user","id":"563e3fac505e4bc480eb487a46238d84","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[],"id":"c8e4bfeab10b4e14a560e7b566ebb0fe","name":"user_operation","formatType":"text","secure":false,"sensitive":false,"table":""},{"type":"String","name":"user_input2","id":"8ac3a718b8f54eb0918a7a50933dbbf0","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"461189642f20301061ad811df699b61c","library-usage":{"type":"Library","input-parameters":[{"name":"context","label":"context","default-value":"","required":true,"id":"a377e53b410c4f3082354c2278c11b25"},{"name":"query","label":"query","default-value":"","required":true,"id":"d593f67867b744b0b2efcd882c39cc29"},{"name":"portal","label":"portal","default-value":"","required":false,"id":"b577775859f44eb9afeb9c31838d13f9"},{"name":"kb_knowledge_base","label":"kb_knowledge_base","default-value":"","required":false,"id":"7504d4d4f171446e83ced2fbd32fa97a"}],"return-values-mapping":[{"name":"results_returned","label":"Results returned","value":{"type":"String","mode":"string","value":"{{vaVars.results_returned}}"}},{"name":"results_helpful","label":"Results Helpful","value":{"type":"String","mode":"string","value":"{{vaVars.results_helpful}}"}}]},"domain":"global","topic_type":"TOPIC_BLOCK","channels":[],"id":"86c83f122fa4701061ad811df699b678","name":"Covid-19 Bot","key_phrases":[],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":true,"design_categories":[],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":true,"nluMapping":"[]"}</design_definition>
        <design_topic_id>86c83f122fa4701061ad811df699b678</design_topic_id>
        <name>Covid-19 Bot</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-06-07 15:42:56</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>b71194a62fe4701061ad811df699b601</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Covid-19 Infections and Vaccination Tracker" source="x_563969_covid_19">461189642f20301061ad811df699b61c</sys_package>
        <sys_policy/>
        <sys_scope display_value="Covid-19 Infections and Vaccination Tracker">461189642f20301061ad811df699b61c</sys_scope>
        <sys_update_name>sys_cb_design_topic_b71194a62fe4701061ad811df699b601</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-06-07 16:51:57</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
